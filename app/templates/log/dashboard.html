{% extends 'base.html' %}

{% block content %}
{% if request.args.get("delete") == "true" %}
<span id="error-message" class="alert alert-success" role="alert"
  style="display:block">Logu başarıyla sildiniz.</span>
{% elif request.args.get("delete") == "false" %}
<span id="error-message" class="alert alert-danger" role="alert"
style="display:block">Logları sadece adminler silebilir.</span>
{% endif %}
{% if request.args.get("escale") == "true" %}
<span id="error-message" class="alert alert-success" role="alert"
  style="display:block">Logu başarıyla escale ettiniz.</span>
{% endif %}
<table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col" style="max-width:50px;">ID</th>
      <th scope="col" style="width:600px;">Denenen Komut</th>
      <th scope="col" style="max-width:150px;">IP:Port</th>
      <th scope="col" style="max-width:150px;">Timestamp</th>
      <th scope="col" style="max-width:150px;">Log Level</th>
      <th scope="col">Kaynak</th>
      <th scope="col" style="max-width:200px;">İşlem</th>
    </tr>
  </thead>
  <tbody>
    {% for log in logs %}
    <tr>
      <td>{{ log.id }}</td>
      <td>{{ log.command }}</td>
      <td>{{ log.ip_port }}</td>
      <td>{{ log.timestand }}</td>
      <td><b>{% for i in range(log.level) %}✯{% endfor %}</b></td>
      <td>{{ log.source }}</td>
      <td>
        <div class="d-flex">
          <form action="/log/{{ log.id }}/escale" method="post">
            <button class="btn btn-primary mr-2" data-toggle="tooltip"
              data-placement="bottom" title="Logu Escale Et">
              <i class="fas fa-eye"></i>
            </button>
          </form>
        </div>

      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}